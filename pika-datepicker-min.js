/** 
 *	@license PikaJS DatePicker plugin 1.0
 *	Â© 2022 Scott Ogrin
 * 	MIT License
 */
!function(t){function e(e,a){t.t(a,"o")||(a={}),t.extend(this,t.datePicker.defaults,a),this.input=t(e),this.input.wrap('<div class="datepicker_w">'),this.cal=this.input.up(".datepicker_w"),this.randID=t.R(),this.pauseEvents=!1,this.build(),this.selectDate(),this.hideCal()}t.datePicker={Version:"1.0",defaults:{month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],short_month_names:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],short_day_names:["S","M","T","W","T","F","S"],start_of_week:0,selectable_days:[0,1,2,3,4,5,6],weekend_days:[0,6],non_selectable:[],short_non_selectable:[],date_format:"dd MM YYYY",date_min:"",date_max:"",error_out_of_range:"Selected date is out of range",on_show:null,on_open:null,on_select:null,on_close:null}},e.prototype={build:function(){var e=this;this.reg=this.dateSetReg(),this.date_max=""!=this.date_max&&this.date_max.match(this.reg)?this.dateDecode(this.date_max.match(this.reg)):"",this.date_min=""!=this.date_min&&this.date_min.match(this.reg)?this.dateDecode(this.date_min.match(this.reg)):"";this.cal.append('<div class="date_selector"><div class="nav"><div class="error_msg" style="display: none;"></div><p class="month_nav"><span class="button prev" title="[Page-Up]">&#8249;</span> <span class="month_name"></span> <span class="button next" title="[Page-Down]">&#8250;</span></p><p class="year_nav"><span class="button prev" title="[Ctrl+Page-Up]">&#8249;</span> <span class="year_name"></span> <span class="button next" title="[Ctrl+Page-Down]">&#8250;</span></p></div><div class="calendar"><div class="head"></div><div class="body"></div></div></div><div class="cal-btn"></div></div>');var a="";if(t.each(this.adjustDays(this.short_day_names),function(t,e){a+="<div>"+e+"</div>"}),this.cal.find(".head").html(a),this.selectDate(),datsel=this.cal.find(".date_selector"),datsel.css({opacity:0}).show(),this.input.width()>210){var n=parseInt(datsel.css("padding-right"))+parseInt(datsel.css("padding-left"))+parseInt(datsel.css("border-right-width"))+parseInt(datsel.css("border-left-width"));datsel.css({width:this.input.width()-n+"px"});var s=datsel.find(".selectable_day").first().height();s>30&&this.cal.css({"font-size":1+.02*(s-30)+"em"})}datsel.hide().css({opacity:""}),this.cal._on("mousedown",".month_nav .prev",function(){return e.moveMonthBy(-1),!1}),this.cal._on("mousedown",".month_nav .next",function(){return e.moveMonthBy(1),!1}),this.cal._on("mousedown",".month_name",function(){return 0==this.down("select").length&&(e.pauseEvents=!0,e.cal.find(".month_name").html(e.getMonthSelect())),!1}),this.cal._on("change",".month_name select",function(){return e.moveMonthBy(parseInt(this.val())-e.currentMonth.getMonth()),e.pauseEvents=!1,!1}),this.cal._on("mousedown",".year_name",function(){return 0==this.down("select").length&&(e.pauseEvents=!0,e.cal.find(".year_name").html(e.getYearSelect())),!1}),this.cal._on("change",".year_name select",function(){return e.moveMonthBy(12*(parseInt(this.val())-e.currentMonth.getFullYear())),e.pauseEvents=!1,!1}),this.cal._on("mousedown",".year_nav .prev",function(){return e.moveMonthBy(-12),!1}),this.cal._on("mousedown",".year_nav .next",function(){return e.moveMonthBy(12),!1}),this.cal._on("mousedown",".selectable_day",function(){return e.changeInput(this.data("date")),!1}),this.cal._on("mouseover",".selectable_day",function(){return this.addClass("hover"),!1}),this.cal._on("mouseout",".selectable_day",function(){return this.removeClass("hover"),!1}),this.cal._on("input","input:first-of-type",function(){return null!=this.val().match(e.reg)&&e.selectDate(),!1}),this.cal.find(".cal-btn").on("click.calBtn"+this.randID,function(t){e.cal.find(".date_selector").visible()?e.hideCal():e.showCal()})},selectMonth:function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(this.isNewDateAllowed(e)){if(!this.currentMonth||this.currentMonth.getFullYear()!=e.getFullYear()||this.currentMonth.getMonth()!=e.getMonth()){this.currentMonth=e;for(var a=this.rangeStart(t),n=this.rangeEnd(t),s=this.daysBetween(a,n),i="",h=0;h<=s;h++){var o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+h,12,0);if(o.getDay()==this.start_of_week){new Date(o.getFullYear(),o.getMonth(),o.getDate()+6,12,0);i+='<div class="week">'}var r="unselected_month";o.getMonth()==t.getMonth()&&this.isNewDateAllowed(o)&&!this.isHoliday(o)&&(r="selectable_day",this.weekend_days.indexOf(o.getDay())>-1&&(r+=" weekend")),i+='<div class="'+r+'" data-date="'+this.dateToString(o)+'">'+o.getDate()+"</div>",o.getDay()==(this.start_of_week+6)%7&&(i+="</div>")}this.cal.find(".body").html(i),this.cal.find(".month_name").html(this.month_names[t.getMonth()]),this.cal.find(".year_name").html(this.currentMonth.getFullYear()),this.cal.find("div[data-date='"+this.dateToString(new Date)+"']").addClass("today")}this.cal.find(".selected").each(function(){this.removeClass("selected")}),this.cal.find('div[data-date="'+this.selectedDateString+'"], div[data-date="'+this.selectedDateString+'"]').each(function(){this.addClass("selected")})}else this.show_error(this.error_out_of_range)},selectDate:function(e){t.t(e)&&(e=this.stringToDate(this.input.val())),e||(e=new Date),this.isNewDateAllowed(e)?(this.selectedDate=e,this.currentYear=e.getFullYear(),this.selectedDateString=this.dateToString(this.selectedDate),this.selectMonth(this.selectedDate)):this.date_min&&this.daysBetween(this.date_min,e)<0?(this.selectedDate=this.date_min,this.selectMonth(this.date_min),this.input.val("")):(this.selectedDate=this.date_max,this.selectMonth(this.selectedDate),this.input.val(""))},isNewDateAllowed:function(t){return(!this.date_min||this.daysBetween(this.date_min,t)>=0)&&(!this.date_max||this.daysBetween(t,this.date_max)>=0)},isHoliday:function(t){return-1==this.selectable_days.indexOf(t.getDay())||this.non_selectable.indexOf(this.dateToString(t))>-1||this.short_non_selectable.indexOf(this.dateToShortString(t))>-1},changeInput:function(e){this.input.val(e),this.input.blur(),this.selectDate(),"hidden"!=this.input.attr("type")&&this.hideCal(),t.t(this.on_select,"f")&&this.on_select.call(this,this.selectedDate)},showCal:function(){var e=this;if(this.pauseEvents=e.pauseEvents=!1,this.cal.find(".error_msg").css({display:"none"}),this.input.off("focus.cal"+this.randID),this.input.attr("readonly",!0),t.t(this.on_show,"f"))this.on_show.call(this,this.cal.find(".date_selector"));else{var a=this.cal.find(".date_selector"),n=this.input.position();a.css({opacity:0}).show(),a.css({top:n.top+this.input[0].offsetHeight+"px",left:n.left+"px"}),a.offset().top+a.height()>document.documentElement.clientHeight&&a.css({top:n.top-a.height()+"px",left:n.left+"px"}),a.css({opacity:""})}t(document).on("mousedown.calClose"+this.randID,function(a){return!!e.pauseEvents||(a.target==e.input[0]||e.insideCal(a)||t(a.target).hasClass("cal-btn")||e.hideCal(),!1)}),t(document).on("keydown.cal"+this.randID,function(t){if(e.pauseEvents)return!0;switch(t.keyCode){case 9:case 27:return void e.hideCal();case 13:e.isNewDateAllowed(e.stringToDate(e.selectedDateString))&&!e.isHoliday(e.stringToDate(e.selectedDateString))&&e.changeInput(e.selectedDateString);break;case 33:e.moveDateMonthBy(-1);break;case 34:e.moveDateMonthBy(1);break;case 38:e.moveDateBy(-7);break;case 40:e.moveDateBy(7);break;case 37:e.moveDateBy(-1);break;case 39:e.moveDateBy(1);break;default:return!0}return!1}),t.t(e.on_open,"f")&&e.on_open.call(e)},hideCal:function(){var e=this;"hidden"!=this.input.attr("type")&&(this.input.removeAttr("readonly"),this.cal.find(".date_selector").hide(),t(document).off("mousedown.calClose"+this.randID),t(document).off("keydown.cal"+this.randID),this.input.on("focus.cal"+this.randID,function(){e.showCal()}),t.t(e.on_close,"f")&&e.on_close.call(e))},insideCal:function(t){var e=this.cal.find(".date_selector"),a=e.offset();return a.right=a.left+e[0].offsetWidth,a.bottom=a.top+e[0].offsetHeight,t.pageY<a.bottom&&t.pageY>a.top&&t.pageX<a.right&&t.pageX>a.left},dateSetReg:function(){switch(this.date_format){case"dd/mm/YYYY":return RegExp(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);case"FF dd YYYY":return new RegExp(/^([a-zA-Z]+) (\d{1,2}) (\d{4})$/);case"MM dd YYYY":return new RegExp(/^([a-zA-Z]{3}) (\d{1,2}) (\d{4})$/);case"dd FF YYYY":return new RegExp(/^(\d{1,2}) ([a-zA-Z]+) (\d{4})$/);case"YYYY/mm/dd":return new RegExp(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/);case"dd MM YYYY":default:return new RegExp(/^(\d{1,2}) ([a-zA-Z]{3}) (\d{4})$/)}},dateDecode:function(t){switch(this.date_format){case"dd/mm/YYYY":return new Date(t[3],parseInt(t[2]-1),t[1]);case"FF dd YYYY":return new Date(t[3],this.month_names.indexOf(t[1]),t[2]);case"MM dd YYYY":return new Date(t[3],this.short_month_names.indexOf(t[1]),t[2]);case"dd FF YYYY":return new Date(t[3],this.month_names.indexOf(t[2]),t[1]);case"YYYY/mm/dd":return new Date(t[1],parseInt(t[2]-1),t[3]);case"dd MM YYYY":default:return new Date(t[3],this.short_month_names.indexOf(t[2]),t[1])}},stringToDate:function(t){var e=t.match(this.reg);return null!=e?0==e[3]&&0==e[2]&&0==e[1]?null:this.dateDecode(e):null},dateToString:function(t){var e=this.strpad(t.getDate()),a=this.month_names[t.getMonth()],n=this.strpad(t.getMonth()+1),s=this.short_month_names[t.getMonth()],i=t.getFullYear();switch(this.date_format){case"dd/mm/YYYY":return e+"/"+n+"/"+i;case"FF dd YYYY":return a+" "+e+" "+i;case"MM dd YYYY":return s+" "+e+" "+i;case"dd FF YYYY":return e+" "+a+" "+i;case"YYYY/mm/dd":return i+"/"+n+"/"+e;case"dd MM YYYY":default:return e+" "+s+" "+i}},dateToShortString:function(t){var e=this.strpad(t.getDate()),a=this.month_names[t.getMonth()],n=this.strpad(t.getMonth()+1),s=this.short_month_names[t.getMonth()];switch(this.date_format){case"dd/mm/YYYY":return e+"/"+n;case"FF dd YYYY":return a+" "+e;case"MM dd YYYY":return s+" "+e;case"dd FF YYYY":return e+" "+a;case"YYYY/mm/dd":return n+"/"+e;case"dd MM YYYY":default:return e+" "+s}},moveDateBy:function(t){var e=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()+t);this.selectDate(e)},moveDateMonthBy:function(t){var e=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+t,this.selectedDate.getDate());e.getMonth()==this.selectedDate.getMonth()+t+1&&e.setDate(0),this.selectDate(e)},moveMonthBy:function(t){var e=t<0?t+1:t,a=t<0?-1:1;this.selectMonth(new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+e,a))},getMonthSelect:function(){for(var t="<select>",e="",a=0;a<this.month_names.length;a++)a==this.currentMonth.getMonth()&&(e=' selected="selected"'),t+='<option value="'+a+'"'+e+">"+this.month_names[a]+"</option>";return t+"</select>"},getYearSelect:function(){for(var t="<select>",e=this.date_min.getFullYear();e<=this.date_max.getFullYear();e++)t+='<option value="'+e+'"'+(e==this.currentMonth.getFullYear()?' selected="selected"':"")+">"+e+"</option>";return t+"</select>"},daysBetween:function(t,e){return t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),((e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))-t)/864e5},changeDayTo:function(t,e,a){var n=a*(Math.abs(e.getDay()-t-7*a)%7);return new Date(e.getFullYear(),e.getMonth(),e.getDate()+n)},rangeStart:function(t){return this.changeDayTo(this.start_of_week,new Date(t.getFullYear(),t.getMonth()),-1)},rangeEnd:function(t){return this.changeDayTo((this.start_of_week-1)%7,new Date(t.getFullYear(),t.getMonth()+1,0),1)},show_error:function(t){var e=this;this.cal.find(".error_msg").html(t).show(),setTimeout(function(){e.cal.find(".error_msg").html("").hide()},3e3)},adjustDays:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=t[(a+this.start_of_week)%7];return e},strpad:function(t){return t<10?"0"+t:t}},t.extend(t.fn,{datePicker:function(t){return this.each(function(){new e(this,t)})}})}(Pika);